<!doctype html>
<html lang="en">
<head><link rel="icon" href="favicon.png" type="image/png" /></html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Bites — Graham Balls Checkout</title>
<style>
  :root {
    --accent: #957c62;
    --primary: #7b542f;
    --card: #f2d8b3;
  }
  body {
    font-family: Inter, system-ui, Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }
  .checkout-card {
    width: 100%;
    max-width: 720px;
    background: var(--card);
    border-radius: 12px;
    box-shadow: 0 8px 30px rgba(20,20,40,0.08);
    padding: 22px;
  }
  header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 10px;
  }
  .logo {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg,var(--accent),#e66);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 700;
  }
  h1 {
    font-size: 20px;
    margin: 0;
  }
  p.lead {
    margin: 6px 0 18px;
    color: #555;
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 18px;
  }
  .box {
    background: #fbfdff;
    padding: 14px;
    border-radius: 10px;
    border: 1px solid #eef2f6;
  }
  label {
    display: block;
    font-size: 13px;
    margin-bottom: 6px;
    color: #333;
  }
  input[type="text"], input[type="tel"], input[type="email"], input[type="number"], select, textarea {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #d7e1ea;
    box-sizing: border-box;
  }
  .row {
    display: flex;
    gap: 10px;
  }
  .total {
    font-weight: 700;
    font-size: 18px;
    margin-top: 6px;
  }
  .pay-methods {
    display: flex;
    gap: 10px;
    margin-top: 6px;
  }
  .btn {
    display: inline-block;
    padding: 12px 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 600;
  }
  .btn-primary { background: var(--primary); color: #fff; }
  .btn-accent { background: var(--accent); color: #fff; }
  .btn-ghost { background: transparent; border: 1px solid #d7e1ea; color: #333; }
  .qr {
    margin-top: 12px;
    text-align: center;
  }
  .qr img {
    max-width: 220px;
    border-radius: 8px;
    border: 1px solid #e6eef6;
  }
  .note {
    font-size: 13px;
    color: #555;
    margin-top: 8px;
  }
  footer { margin-top: 16px; text-align: right; }

  /* Summary Modal */
  #summaryModal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    z-index: 9999;
    align-items: center;
    justify-content: center;
  }
  .summary-card {
    background: #fff;
    padding: 18px;
    border-radius: 12px;
    width: 90%;
    max-width: 520px;
    box-shadow: 0 10px 30px rgba(10,10,30,0.2);
  }
  .summary-row {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
  }
</style>
</head>
<body>
  <div class="checkout-card" role="main">
    <header>
      <div>
        <h1>Happy Bites — Graham Balls</h1>
        <p class="lead">Secure checkout — choose payment method and quantity, then confirm your order. We offer Cash on Delivery (COD) or GCash.</p>
      </div>
    </header>

    <div class="grid">
      <!-- Customer Input Box -->
      <div class="box">
        <label>Customer Name</label>
        <input id="name" type="text" placeholder="Juan Dela Cruz" />

        <label>Phone Number</label>
        <input id="phone" type="tel" placeholder="09XXXXXXXXX" />

        <label>Delivery Address</label>
        <textarea id="address" rows="3" placeholder="House no., Street, Barangay, City"></textarea>

        <label>Order Type</label>
        <select id="orderType" onchange="updatePrice()">
          <option value="piece" selected>Piece — ₱10 each</option>
          <option value="tub">Tub (9 pcs) — ₱75 per tub</option>
        </select>

        <label>Quantity</label>
        <input id="quantity" type="number" min="1" value="1" onchange="updatePrice()" />

        <div style="margin-top:8px;">
          <div class="total">Total: ₱<span id="total">10</span></div>
          <div class="note">Price updates automatically when you change type or quantity.</div>
        </div>

        <label style="margin-top:12px">Payment Method</label>
        <select id="paymentMethod" onchange="toggleQR()">
          <option value="cod">Cash on Delivery (COD)</option>
          <option value="gcash">GCash (Scan QR)</option>
        </select>

        <div id="qrBox" class="qr" style="display:none;">
          <p style="margin:6px 0 8px; font-weight:700;">Scan to pay with GCash</p>
          <img src="qrpayment.jpg" alt="GCash QR" />
          <div class="note">After paying, please take a screenshot or transaction reference and include it in the order notes below.</div>
        </div>

        <label style="margin-top:12px">Order Notes (optional)</label>
        <textarea id="notes" rows="2" placeholder="e.g. leave at the guardhouse"></textarea>

        <footer>
          <button class="btn btn-primary" onclick="previewOrder()">Confirm Order</button>
        </footer>
      </div>

      <!-- Order Summary Box -->
      <aside class="box">
        <h3 style="margin-top:0">Order Summary</h3>
        <div style="margin:10px 0;">
          <div><strong>Product</strong></div>
          <div>Graham Balls</div>
        </div>

        <div style="margin:10px 0;">
          <div><strong>Unit price</strong></div>
          <div id="unitPrice">₱10</div>
        </div>

        <div style="margin:10px 0;">
          <div><strong>Quantity</strong></div>
          <div id="qtySummary">1</div>
        </div>

        <div style="margin:12px 0;">
          <div class="summary-row"><div>Subtotal</div><div>₱<span id="subtotal">10</span></div></div>
          <div class="summary-row"><div>Delivery</div><div>₱<span id="delivery">59</span></div></div>
          <hr />
          <div class="summary-row" style="font-weight:700;"><div>Total</div><div>₱<span id="grandTotal">60</span></div></div>
        </div>

        <div class="note">Default delivery fee is ₱59.</div>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <button class="btn btn-ghost" onclick="resetForm()">Reset</button>
        </div>
      </aside>
    </div>
  </div>

  <!-- Summary Modal -->
  <div id="summaryModal" role="dialog" aria-modal="true">
    <div class="summary-card">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">Order Confirmation</h3>
        <button class="btn btn-ghost" onclick="closeSummary()">Close</button>
      </div>
      <div style="margin-top:12px;">
        <div class="summary-row"><div>Customer</div><div id="sName"></div></div>
        <div class="summary-row"><div>Phone</div><div id="sPhone"></div></div>
        <div class="summary-row"><div>Address</div><div id="sAddress"></div></div>
        <div class="summary-row"><div>Product</div><div>Graham Balls</div></div>
        <div class="summary-row"><div>Type</div><div id="sType"></div></div>
        <div class="summary-row"><div>Quantity</div><div id="sQty"></div></div>
        <div class="summary-row"><div>Payment</div><div id="sPayment"></div></div>
        <div class="summary-row"><div>Subtotal</div><div>₱<span id="sSubtotal"></span></div></div>
        <div class="summary-row"><div>Delivery</div><div>₱<span id="sDelivery"></span></div></div>
        <hr />
        <div class="summary-row" style="font-weight:700;"><div>Total</div><div>₱<span id="sTotal"></span></div></div>
      </div>

      <div style="margin-top:12px; display:flex; gap:8px; justify-content:flex-end;">
        <button class="btn btn-ghost" onclick="closeSummary()">Edit</button>
        <button class="btn btn-accent" onclick="finalizeOrder()">Place Order</button>
      </div>
    </div>
  </div>

<script>
const PRICE_PIECE = 10;
const PRICE_TUB = 75;
const DELIVERY_FEE = 59;

function updatePrice() {
  const type = document.getElementById('orderType').value;
  const qty = Math.max(1, parseInt(document.getElementById('quantity').value || 1));
  const unit = type === 'piece' ? PRICE_PIECE : PRICE_TUB;
  const subtotal = unit * qty;

  document.getElementById('unitPrice').innerText = `₱${unit}`;
  document.getElementById('qtySummary').innerText = qty;
  document.getElementById('subtotal').innerText = subtotal;
  document.getElementById('total').innerText = subtotal + DELIVERY_FEE;
  document.getElementById('grandTotal').innerText = subtotal + DELIVERY_FEE;
}

function toggleQR() {
  document.getElementById('qrBox').style.display =
    document.getElementById('paymentMethod').value === 'gcash' ? 'block' : 'none';
}

function previewOrder() {
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const address = document.getElementById('address').value.trim();
  if (!name || !phone || !address) {
    alert('Please fill out your name, phone, and delivery address before confirming.');
    return;
  }

  const type = document.getElementById('orderType').value;
  const qty = Math.max(1, parseInt(document.getElementById('quantity').value || 1));
  const unit = type === 'piece' ? PRICE_PIECE : PRICE_TUB;
  const subtotal = unit * qty;

  document.getElementById('sName').innerText = name;
  document.getElementById('sPhone').innerText = phone;
  document.getElementById('sAddress').innerText = address;
  document.getElementById('sType').innerText = type === 'piece' ? 'Piece' : 'Tub';
  document.getElementById('sQty').innerText = qty;
  document.getElementById('sPayment').innerText = document.getElementById('paymentMethod').value.toUpperCase();
  document.getElementById('sSubtotal').innerText = subtotal;
  document.getElementById('sDelivery').innerText = DELIVERY_FEE;
  document.getElementById('sTotal').innerText = subtotal + DELIVERY_FEE;

  document.getElementById('summaryModal').style.display = 'flex';
}

function closeSummary() {
  document.getElementById('summaryModal').style.display = 'none';
}

function finalizeOrder() {
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const address = document.getElementById('address').value.trim();
  const type = document.getElementById('orderType').value;
  const qty = Math.max(1, parseInt(document.getElementById('quantity').value || 1));
  const unit = type === 'piece' ? PRICE_PIECE : PRICE_TUB;
  const subtotal = unit * qty;
  const delivery = DELIVERY_FEE;
  const total = subtotal + delivery;
  const payment = document.getElementById('paymentMethod').value;
  const notes = document.getElementById('notes').value.trim();

  const receipt = [
    'Happy Bites — Order Receipt',
    '==========================',
    `Name: ${name}`,
    `Phone: ${phone}`,
    `Address: ${address}`,
    `Product: Graham Balls`,
    `Type: ${type === 'piece' ? 'Piece' : 'Tub'}`,
    `Quantity: ${qty}`,
    `Unit price: ₱${unit}`,
    `Subtotal: ₱${subtotal}`,
    `Delivery: ₱${delivery}`,
    `TOTAL: ₱${total}`,
    `Payment method: ${payment.toUpperCase()}`,
    `Notes: ${notes}`,
    '',
    'Thank you for ordering from Happy Bites!'
  ].join('\n');

  const blob = new Blob([receipt], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `happybites-order-${Date.now()}.txt`;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);

  alert('Thank you! Your order was placed successfully. A receipt has been downloaded for your reference.');
  closeSummary();
  resetForm();
}

function resetForm() {
  document.getElementById('name').value = '';
  document.getElementById('phone').value = '';
  document.getElementById('address').value = '';
  document.getElementById('quantity').value = 1;
  document.getElementById('orderType').value = 'piece';
  document.getElementById('paymentMethod').value = 'cod';
  document.getElementById('notes').value = '';
  toggleQR();
  updatePrice();
}

// Initial setup
updatePrice();
</script>
</body>
</html>
